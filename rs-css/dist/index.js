(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var n=o.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!t;)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=class{constructor(e,t="div",o="",n=""){const s=document.createElement(t);s.className=o,s.textContent=n,e&&e.append(s),this.node=s}destroy(){this.node.remove()}},o={levels_view_wrapper:"levels_view_wrapper",levelsViewWrapper:"levels_view_wrapper",levels_buttons_wrapper:"levels_buttons_wrapper",levelsButtonsWrapper:"levels_buttons_wrapper",complete_level_symbol:"complete_level_symbol",completeLevelSymbol:"complete_level_symbol",complete_level_symbol_with_hint:"complete_level_symbol_with_hint",completeLevelSymbolWithHint:"complete_level_symbol_with_hint",complete_level:"complete_level",completeLevel:"complete_level",level_button:"level_button",levelButton:"level_button",reset_button:"reset_button",resetButton:"reset_button",active_level_button:"active_level_button",activeLevelButton:"active_level_button"};class n extends t{constructor(e,t,n){super(e,"div",o.levels_view_wrapper),this.buildLevels(t,n)}buildLevels(e,n){this.node.innerHTML="",e.map(((e,s)=>{const i=n.data.completeLevels.includes(s)?[o.complete_level_symbol,o.complete_level].join(" "):o.complete_level_symbol,l=n.data.completeLevelsWithHints.includes(s)?[o.complete_level_symbol_with_hint,o.complete_level].join(" "):o.complete_level_symbol_with_hint,a=new t(this.node,"div",o.levels_buttons_wrapper);new t(a.node,"div",i).node.innerHTML="&#10004;",new t(a.node,"div",l).node.innerHTML="&#9733;";const d=new t(a.node,"button",o.level_button,(s+1).toString());n.data.currentLevel===s&&d.node.classList.add("active_level_button"),d.node.onclick=()=>{this.onChooseLevel(s)}})),new t(this.node,"button",o.reset_button,"Reset progress").node.onclick=()=>{this.onResetLevel()}}}const s=e.p+"426425b7fc64c02ac7d9.json";class i{constructor(){this.data=[]}loadJSON(){return e=this,t=void 0,n=function*(){return this.data=yield this.loadData(s),this},new((o=void 0)||(o=Promise))((function(s,i){function l(e){try{d(n.next(e))}catch(e){i(e)}}function a(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,a)}d((n=n.apply(e,t||[])).next())}));var e,t,o,n}loadData(e){return fetch(e).then((e=>e.json())).then((e=>e))}getCategoriesData(){return this.data}}class l extends t{constructor(e,t="div",o,n=""){super(e,t,o.default,n),this.styles=o}removeAnimation(){this.node.classList.remove(this.styles.hidden)}animateOut(){return new Promise((e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>{this.node.classList.contains(this.styles.hidden)&&e(null),this.node.classList.add(this.styles.hidden),this.node.ontransitionend=t=>{t.target===this.node&&(this.node.ontransitionend=null,e(null))}}))))}))}}const a={shake:"shake","horizontal-shaking":"horizontal-shaking",horizontalShaking:"horizontal-shaking",help_button:"help_button",helpButton:"help_button",input_field:"input_field",inputField:"input_field",container_editor:"container_editor",containerEditor:"container_editor",like_button:"like_button",likeButton:"like_button"};class d extends l{constructor(e,o,n){super(e,"div",{default:a.container_editor,hidden:a.shake});const s=new t(this.node,"form",a.container_editor),i=new t(s.node,"input",a.input_field);i.node.type="text",i.node.title="Enter answer";const l=new t(s.node,"input",[a.like_button,a.transition].join(" "));l.node.type="submit",l.node.value="Enter",s.node.onsubmit=e=>{e.preventDefault(),this.onGetValue(i.node.value)};const d=new t(this.node,"button",[a.help_button,a.transition].join(" "),"Help");d.node.onclick=()=>{const e=o[n.data.currentLevel].answer;e.split("").forEach(((t,o)=>{setTimeout((()=>i.node.value+=t),10*o),setTimeout((()=>l.node.disabled=!1),10*e.split("").length)})),d.node.disabled=!0,l.node.disabled=!0,n.data.completeLevelsWithHints.includes(n.data.currentLevel)||n.data.completeLevelsWithHints.push(n.data.currentLevel),this.onHelp()}}}class r extends l{constructor(e,o,n){super(e,"pre",{default:"",hidden:a.shake});const s=new t(this.node,"code","language-html prettyprint");new t(s.node,"div","",o[n.data.currentLevel].HTMLCode.split("\r\n")[0]).node.id="editor",o[n.data.currentLevel].HTMLCode.split("\r\n").slice(1,-1).forEach((e=>{new t(s.node,"div","white_font",e)})),new t(s.node,"div","",o[n.data.currentLevel].HTMLCode.split("\r\n").slice(-1).join())}}const c={table:"table",default:"default",hide:"hide",fancyClass:"fancyClass",child:"child",withChild:"withChild",fancyId:"fancyId",strobe:"strobe",strobeStart:"strobeStart",tooltip:"tooltip",tooltip0:"tooltip0",tooltip1:"tooltip1",tooltip2:"tooltip2",tooltip3:"tooltip3",tooltiptext:"tooltiptext",tooltiptext0:"tooltiptext0",tooltiptext1:"tooltiptext1",tooltiptext2:"tooltiptext2",tooltiptext3:"tooltiptext3",displayNone:"displayNone",hover:"hover",container_HTML:"container_HTML",containerHtml:"container_HTML",white_font:"white_font",whiteFont:"white_font"};class h extends t{constructor(e,o,n){super(e),this.el=[];const s=new t(this.node,"div","table");this.buildDom(o[n.data.currentLevel].HTMLDom,s.node,0)}buildDom(e,o,n){e&&(n++,e.forEach((e=>{if(e.classNameAnimation){const s=new l(o,e.tagName,{default:[c[`${e.className}`],c[`${e.classNameAnimation}`],c.default,c.tooltip].join(" "),hidden:c.hide});s.node.id=e.id?e.id:"",this.el.push(s);const i=e.className?` class="${e.className}"`:"",a=e.id?` id="${e.id}"`:"";new t(s.node,"span",c.tooltiptext,`<${e.tagName}`+i+a+`></${e.tagName}>`),e.child&&this.buildDom(e.child,s.node,n)}else{const s=new t(o,e.tagName,[c[`${e.className}`],c[`tooltip${n}`]].join(" "));s.node.id=e.id?e.id:"";const i=e.className?` class="${e.className}"`:"",l=e.id?` id="${e.id}"`:"";s.node.classList.contains("withChild")||new t(s.node,"span",[c.child,c[`tooltiptext${n}`]].join(" "),`<${e.tagName}`+i+l+`></${e.tagName}>`),e.child&&this.buildDom(e.child,s.node,n)}})))}animateRightQuestion(){return Promise.all(this.el.map((e=>e.animateOut())))}}const u={currentLevel:0,completeLevels:[],completeLevelsWithHints:[]};class p extends t{constructor(e){super(e,"div","footer"),new t(this.node).node.outerHTML='\n<div class="footer-year">2023</div>\n<div>\n    <a class="footer-github" href="https://github.com/dab10">github</a>\n</div>\n<a href="https://rs.school/js/">\n    <div class="footer-rss-image"></div>\n</a>\n'}}class v extends t{constructor(e){super(e,"div");const o=new t(this.node,"dialog","dialog","Congratulation! All levels complete!"),n=new t(o.node,"button","","ok");o.node.showModal(),n.node.onclick=()=>{o.node.close(),o.destroy()}}}class m{constructor(e){this.currentLevel=e.currentLevel,this.completeLevels=e.completeLevels,this.completeLevelsWithHints=e.completeLevelsWithHints}static load(){const e=localStorage.getItem("savedState");return new m(e?JSON.parse(e):u)}save(){localStorage.setItem("savedState",JSON.stringify(this))}}let _;try{_=m.load()}catch(e){_=new m(u)}const g=new class{get data(){return this._data}set data(e){this._data=e}constructor(e){this._data=e}}(_);new class extends t{constructor(e,o){super(e,"div","global_wrapper"),this.state=o,this.header=new t(this.node,"div","global_header","RS Selectors"),this.gameHeader=new t(this.node,"div","game_header"),this.gameEditor=new t(this.node,"div","game_editor"),this.gameHTMLViewer=new t(this.node,"div","game_HTML_Viewer"),this.gameLevel=new t(this.node,"div","game_level"),this.footer=new t(this.node,"div","global_footer"),new p(this.footer.node),this.model=new i,this.model.loadJSON().then((()=>{this.gameCycle()}))}gameCycle(){const e=new n(this.gameLevel.node,this.model.getCategoriesData(),this.state),t=new r(this.gameHTMLViewer.node,this.model.getCategoriesData(),this.state),o=new h(this.gameHeader.node,this.model.getCategoriesData(),this.state),s=new d(this.gameEditor.node,this.model.getCategoriesData(),this.state);s.onGetValue=n=>{const i=this.model.getCategoriesData();if(n===this.model.getCategoriesData()[this.state.data.currentLevel].answer){const n=this.state;n.data.completeLevels.includes(n.data.currentLevel)||n.data.completeLevels.push(n.data.currentLevel);const l=n.data.currentLevel+1>=i.length?0:n.data.currentLevel+1;n.data=Object.assign(Object.assign({},n.data),{currentLevel:l}),n.data.completeLevels.length===i.length?o.animateRightQuestion().then((()=>{e.destroy(),s.destroy(),t.destroy(),o.destroy(),new v(this.node),this.gameCycle()})):o.animateRightQuestion().then((()=>{e.destroy(),s.destroy(),t.destroy(),o.destroy(),this.gameCycle()}))}else s.removeAnimation(),t.removeAnimation(),s.animateOut(),t.animateOut()},e.onChooseLevel=n=>{const i=this.state;i.data=Object.assign(Object.assign({},i.data),{currentLevel:n}),e.destroy(),s.destroy(),t.destroy(),o.destroy(),this.gameCycle()},e.onResetLevel=()=>{const n=this.state;n.data.currentLevel=0,n.data.completeLevels.length=0,n.data.completeLevelsWithHints.length=0,e.destroy(),s.destroy(),t.destroy(),o.destroy(),this.gameCycle()},s.onHelp=()=>{e.buildLevels(this.model.getCategoriesData(),this.state)}}}(document.body,g),window.onbeforeunload=()=>{new m(g.data).save()}})();